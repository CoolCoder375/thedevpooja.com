<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DevPooja Products - Browse our complete collection of Hindu worship essentials, incense, garlands, diyas and more.">
    <title>All Products | The Devpooja</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/products.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-logo">
                <a href="../index.html">
                    <img src="../images/logo.JPG" alt="The Devpooja" class="logo-img">
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html" class="nav-link">Home</a></li>
                <li><a href="products.html" class="nav-link active">Products</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <main>
        <section class="page-header">
            <div class="container">
                <h1 class="page-title">Our Products</h1>
                <p class="page-subtitle">Discover our complete collection of authentic Hindu worship essentials</p>
            </div>
        </section>

        <section class="products-listing">
            <div class="container">
                <div class="products-controls">
                    <div class="filter-section">
                        <h3>Filter by Category</h3>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-category="all">All Products</button>
                            <button class="filter-btn" data-category="incense">Incense & Dhoop</button>
                            <button class="filter-btn" data-category="garlands">Garlands & Flowers</button>
                            <button class="filter-btn" data-category="idols">Idols & Statues</button>
                            <button class="filter-btn" data-category="diyas">Diyas & Lamps</button>
                            <button class="filter-btn" data-category="pooja-items">Pooja Items</button>
                            <button class="filter-btn" data-category="coconuts">Coconuts</button>
                        </div>
                    </div>
                    <div class="results-info">
                        <span id="results-count">Showing all products</span>
                    </div>
                </div>

                <!-- Desktop Grid View -->
                <div class="products-grid desktop-view" id="all-products">
                    <!-- Products will be loaded dynamically -->
                </div>

                <!-- Mobile Slider View -->
                <div class="mobile-view">
                    <div class="swiper products-mobile-swiper">
                        <div class="swiper-wrapper" id="mobile-products">
                            <!-- Products will be loaded dynamically for mobile -->
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <img src="../images/logo.JPG" alt="The Devpooja" class="footer-logo">
                    <p>Your trusted source for authentic Hindu worship essentials. Bringing devotion to your doorstep.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Categories</h4>
                    <ul>
                        <li><a href="#" data-category="diyas">Diyas & Lamps</a></li>
                        <li><a href="#" data-category="garlands">Garlands & Flowers</a></li>
                        <li><a href="#" data-category="idols">Idols & Statues</a></li>
                        <li><a href="#" data-category="incense">Incense & Dhoop</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Customer Care</h4>
                    <ul>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Return Policy</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Support</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 The Devpooja. All rights reserved. | Crafted with devotion üôè</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="../js/products.js"></script>
    <script>
        let mobileSwiper;

        document.addEventListener('productsLoaded', function() {
            const productsContainer = document.getElementById('all-products');
            const mobileProductsContainer = document.getElementById('mobile-products');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const resultsCount = document.getElementById('results-count');

            // Load all products initially
            loadProducts('all');

            // Add filter functionality
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');

                    const category = this.getAttribute('data-category');
                    loadProducts(category);
                });
            });

            function loadProducts(category) {
                let productsToShow;

                if (category === 'all') {
                    productsToShow = products;
                    resultsCount.textContent = `Showing all ${products.length} products`;
                } else {
                    productsToShow = getProductsByCategory(category);
                    resultsCount.textContent = `Showing ${productsToShow.length} products in ${categories[category] || category}`;
                }

                if (productsToShow.length === 0) {
                    productsContainer.innerHTML = '<p class="no-products">No products found in this category.</p>';
                    mobileProductsContainer.innerHTML = '<div class="swiper-slide"><p class="no-products">No products found in this category.</p></div>';
                } else {
                    // Desktop grid - horizontal card layout
                    productsContainer.innerHTML = productsToShow.map(product =>
                        `<div class="product-card-horizontal" data-category="${product.category}">
                            <div class="product-image-horizontal">
                                <img src="${product.image}" alt="${product.name}" loading="lazy">
                            </div>
                            <div class="product-content-horizontal">
                                <div class="product-info-horizontal">
                                    <h3>${product.name}</h3>
                                    <p>${product.description}</p>
                                    <div class="product-price">‚Çπ${product.price}</div>
                                    <div class="product-features">
                                        ${product.features.map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
                                    </div>
                                </div>
                                <div class="product-actions">
                                    <button class="btn btn-primary" onclick="addToCart(${product.id})">Add to Cart</button>
                                </div>
                            </div>
                        </div>`
                    ).join('');

                    // Mobile slider - 2 cards per slide stacked vertically
                    const mobileSlides = [];
                    for (let i = 0; i < productsToShow.length; i += 2) {
                        const product1 = productsToShow[i];
                        const product2 = productsToShow[i + 1];

                        let slideContent = `<div class="swiper-slide">`;

                        // First card
                        slideContent += `
                            <div class="mobile-card-row" data-category="${product1.category}">
                                <div class="product-image-horizontal">
                                    <img src="${product1.image}" alt="${product1.name}" loading="lazy">
                                </div>
                                <div class="product-content-horizontal">
                                    <div class="product-info-horizontal">
                                        <h3>${product1.name}</h3>
                                        <p>${product1.description}</p>
                                        <div class="product-price">‚Çπ${product1.price}</div>
                                    </div>
                                    <div class="product-actions">
                                        <button class="btn btn-primary" onclick="addToCart(${product1.id})">Add to Cart</button>
                                    </div>
                                </div>
                            </div>`;

                        // Second card (if exists)
                        if (product2) {
                            slideContent += `
                                <div class="mobile-card-row" data-category="${product2.category}">
                                    <div class="product-image-horizontal">
                                        <img src="${product2.image}" alt="${product2.name}" loading="lazy">
                                    </div>
                                    <div class="product-content-horizontal">
                                        <div class="product-info-horizontal">
                                            <h3>${product2.name}</h3>
                                            <p>${product2.description}</p>
                                            <div class="product-price">‚Çπ${product2.price}</div>
                                        </div>
                                        <div class="product-actions">
                                            <button class="btn btn-primary" onclick="addToCart(${product2.id})">Add to Cart</button>
                                        </div>
                                    </div>
                                </div>`;
                        }

                        slideContent += `</div>`;
                        mobileSlides.push(slideContent);
                    }

                    mobileProductsContainer.innerHTML = mobileSlides.join('');

                    // Destroy existing swiper if it exists
                    if (mobileSwiper) {
                        mobileSwiper.destroy(true, true);
                    }

                    // Initialize mobile swiper
                    mobileSwiper = new Swiper('.products-mobile-swiper', {
                        slidesPerView: 1,
                        spaceBetween: 20,
                        pagination: {
                            el: '.swiper-pagination',
                            clickable: true,
                        }
                    });
                }
            }
        });

        // Mobile menu toggle
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            document.querySelectorAll('.nav-link').forEach(n => n.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
            }));
        }
    </script>
</body>
</html>