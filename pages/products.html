<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DevPooja Products - Browse our complete collection of Hindu worship essentials, incense, garlands, diyas and more.">
    <title>All Products | The Devpooja</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/products.css">
    <link rel="stylesheet" href="../css/cart.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-logo">
                <a href="../index.html">
                    <img src="../images/logo.JPG" alt="The Devpooja" class="logo-img">
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html" class="nav-link">Home</a></li>
                <li><a href="products.html" class="nav-link active">Products</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <main>
        <section class="products-listing">
            <div class="container">
                <!-- Desktop Controls -->
                <div class="products-controls desktop-controls">
                    <div class="filter-section" id="filterSectionDesktop">
                        <h3>Filter by Category</h3>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-category="all">All Products</button>
                            <button class="filter-btn" data-category="incense">Incense & Dhoop</button>
                            <button class="filter-btn" data-category="garlands">Garlands & Flowers</button>
                            <button class="filter-btn" data-category="idols">Idols & Statues</button>
                            <button class="filter-btn" data-category="diyas">Diyas & Lamps</button>
                            <button class="filter-btn" data-category="pooja-items">Pooja Items</button>
                            <button class="filter-btn" data-category="coconuts">Coconuts</button>
                        </div>
                    </div>
                    <div class="results-info">
                        <span id="results-count">Showing all products</span>
                    </div>
                </div>

                <!-- Desktop Grid View -->
                <div class="products-grid desktop-view" id="all-products">
                    <!-- Products will be loaded dynamically -->
                </div>

                <!-- Mobile Layout: Filters Left + Products Right -->
                <div class="mobile-filter-sidebar">
                    <button class="filter-toggle-btn" id="filterToggleBtn">
                        <span class="filter-icon">‚ò∞</span>
                    </button>
                    <div class="filter-section mobile-filter-section" id="filterSection">
                        <h3>Filters</h3>
                        <div class="filter-buttons mobile-filter-buttons">
                            <button class="filter-btn active" data-category="all">All</button>
                            <button class="filter-btn" data-category="incense">Incense</button>
                            <button class="filter-btn" data-category="garlands">Garlands</button>
                            <button class="filter-btn" data-category="idols">Idols</button>
                            <button class="filter-btn" data-category="diyas">Diyas</button>
                            <button class="filter-btn" data-category="pooja-items">Pooja</button>
                            <button class="filter-btn" data-category="coconuts">Coconuts</button>
                        </div>
                    </div>
                </div>
                <div class="mobile-view mobile-layout-wrapper">
                    <!-- Mobile Filter Sidebar -->
                    

                    <!-- Mobile Products Grid -->
                    <div class="mobile-products-container">
                        <div class="results-info mobile-results-info">
                            <span id="mobile-results-count">Showing all products</span>
                        </div>
                        <div class="mobile-products-grid" id="mobile-products">
                            <!-- Products will be loaded dynamically for mobile -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <img src="../images/logo.JPG" alt="The Devpooja" class="footer-logo">
                    <p>Your trusted source for authentic Hindu worship essentials. Bringing devotion to your doorstep.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Categories</h4>
                    <ul>
                        <li><a href="#" data-category="diyas">Diyas & Lamps</a></li>
                        <li><a href="#" data-category="garlands">Garlands & Flowers</a></li>
                        <li><a href="#" data-category="idols">Idols & Statues</a></li>
                        <li><a href="#" data-category="incense">Incense & Dhoop</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Customer Care</h4>
                    <ul>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Return Policy</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Support</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 The Devpooja. All rights reserved. | Crafted with devotion üôè</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="../js/config.js" defer></script>
    <script src="../js/products.js" defer></script>
    <script src="../js/cart.js" defer></script>
    <script defer>
        document.addEventListener('productsLoaded', function() {
            const productsContainer = document.getElementById('all-products');
            const mobileProductsContainer = document.getElementById('mobile-products');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const resultsCount = document.getElementById('results-count');
            const mobileResultsCount = document.getElementById('mobile-results-count');

            // Load all products initially
            loadProducts('all');

            // Add filter functionality
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');

                    const category = this.getAttribute('data-category');
                    loadProducts(category);
                });
            });

            function loadProducts(category) {
                let productsToShow;

                if (category === 'all') {
                    productsToShow = products;
                    resultsCount.textContent = `Showing all ${products.length} products`;
                    if (mobileResultsCount) {
                        mobileResultsCount.textContent = `All Products (${products.length})`;
                    }
                } else {
                    productsToShow = getProductsByCategory(category);
                    resultsCount.textContent = `Showing ${productsToShow.length} products in ${categories[category] || category}`;
                    if (mobileResultsCount) {
                        mobileResultsCount.textContent = `${productsToShow.length} items`;
                    }
                }

                if (productsToShow.length === 0) {
                    productsContainer.innerHTML = '<p class="no-products">No products found in this category.</p>';
                    mobileProductsContainer.innerHTML = '<p class="no-products">No products found.</p>';
                } else {
                    // Desktop grid - horizontal card layout
                    productsContainer.innerHTML = productsToShow.map(product =>
                        `<div class="product-card-horizontal" data-category="${product.category}">
                            <div class="product-image-horizontal">
                                <img src="${product.image}" alt="${product.name}" loading="lazy">
                            </div>
                            <div class="product-content-horizontal">
                                <div class="product-info-horizontal">
                                    <h3>${product.name}</h3>
                                    <p>${product.description}</p>
                                    <div class="product-price">‚Çπ${product.price}</div>
                                    <div class="product-features">
                                        ${product.features.map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
                                    </div>
                                </div>
                                <div class="product-actions">
                                    <button class="btn btn-primary" onclick="addToCart(${product.id})">Add to Cart</button>
                                </div>
                            </div>
                        </div>`
                    ).join('');

                    // Mobile grid - portrait cards
                    mobileProductsContainer.innerHTML = productsToShow.map(product =>
                        `<div class="mobile-product-card" data-category="${product.category}">
                            <div class="mobile-product-image">
                                <img src="${product.image}" alt="${product.name}" loading="lazy">
                            </div>
                            <div class="mobile-product-info">
                                <h3>${product.name}</h3>
                                <p>${product.description}</p>
                                <div class="product-price">‚Çπ${product.price}</div>
                                <button class="btn btn-primary" onclick="addToCart(${product.id})">Add to Cart</button>
                            </div>
                        </div>`
                    ).join('');
                }
            }
        });

        // Mobile menu toggle
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            document.querySelectorAll('.nav-link').forEach(n => n.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
            }));
        }

        // Filter toggle for mobile
        const filterToggleBtn = document.getElementById('filterToggleBtn');
        const filterSection = document.getElementById('filterSection');

        if (filterToggleBtn && filterSection) {
            filterToggleBtn.addEventListener('click', () => {
                filterToggleBtn.classList.toggle('active');
                filterSection.classList.toggle('active');
            });

            // Close filter menu when a filter is selected on mobile
            const mobileFilterButtons = document.querySelectorAll('.mobile-filter-buttons .filter-btn');
            mobileFilterButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Auto-close filter menu after selection
                    setTimeout(() => {
                        filterSection.classList.remove('active');
                        filterToggleBtn.classList.remove('active');
                    }, 300);
                });
            });
        }
    </script>
</body>
</html>